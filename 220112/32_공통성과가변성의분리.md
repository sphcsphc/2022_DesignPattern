
# 공통성과 가변성의 분리
> 변하지 않는 것(공통성, 전체 알고리즘)에서 변하는 것(가변성, 정책)을 분리하는 4가지 기술

## 일반함수에서 변해야 하는 정책
* 변하는 것을 함수 인자화한다.
  * 함수 포인터로 분리
    * 문제점: 인라인화가 불가능합니다.
  * 성능을 고려한다면, 함수 포인터대신 함수 객체도 사용 가능하도록 설계해야 합니다.
    * 정책을 템플릿 인자로 만듭니다.
      * 문제점: 함수 객체를 사용할 경우, 코드를 각 타입에 따라 생성해야 하기 때문에, 코드 메모리 사용량에 대한 증가가 발생합니다.
    * 함수 객체를 쉽게 생성할 수 있는 람다 문법.

## 클래스의 멤버 함수에서 변해야 하는 정책
* 변하는 것을 가상 함수로 뽑아낸다
  * Template Method Pattern
  * 자식 클래스를 만들어서 새로운 정책을 가진 클래스를 만듭니다.
  * 문제점: 실행 시간에 정책을 교체할 수 없고, 정책을 재사용하기 어렵습니다.
* 변하는 것을 인터페이스 기반 다른 클래스로 뽑아낸다.
  * Strategy Pattern
  * 실행 시간에 정책을 교체하는 것이 가능하고, 정책을 다른 종류의 클래스에서 재사용 가능합니다.
* 실행 시간에 정책을 교체할 필요가 없다면 - 단위 전략
  * 변하는 것을 템플릿 인자화 한다.
  * 속도가 빠르다. 하지만 실행 시간에 교체가 불가능하다.